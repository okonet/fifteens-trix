<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <title>Fifteens</title>
    
    <link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
	
	<!-- iPad/iPhone specific css below, add after your main css >
	<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />		
	
	-->
  <!-- <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="stylesheets/iphone.css" type="text/css" />     -->
	<link rel="stylesheet" href="stylesheets/iphone.css" type="text/css" />		
	
	<!-- If you application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
	<script type="text/javascript" charset="utf-8" src="phonegap.0.9.4.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="zepto.js"></script>
	<script type="text/javascript" charset="utf-8" src="underscore.js"></script>
	<script type="text/javascript" charset="utf-8" src="backbone.js"></script>
	
	<script type="text/javascript" charset="utf-8" src="fifteens.js"></script>
	
  <script src="http://localhost:8001/vogue-client.js" type="text/javascript"></script>
	
  <script type="text/javascript" charset="utf-8">
  
  function touchHandle (event) {
    var touches = event.originalEvent.changedTouches,
        firstTouch = touches[0],
        type = "";
        
    switch(event.type) {
        case 'touchstart': type = 'mousedown'; break;
        case 'touchmove':  type='mousemove'; break;        
        case 'touchend':   type='mouseup'; break;
        default: return;
    }

    //initMouseEvent(type, canBubble, cancelable, view, clickCount, 
    //           screenX, screenY, clientX, clientY, ctrlKey, 
    //           altKey, shiftKey, metaKey, button, relatedTarget);

    var simulatedEvent = document.createEvent("MouseEvent");
    simulatedEvent.initMouseEvent(type, true, true, window, 1, 
                              firstTouch.screenX, firstTouch.screenY, 
                              firstTouch.clientX, firstTouch.clientY, false, 
                              false, false, false, 0/*left*/, null);

    firstTouch.target.dispatchEvent(simulatedEvent);
    event.preventDefault();
  };
  
  document.addEventListener("touchstart", touchHandle, false);
  document.addEventListener("touchmove", touchHandle, false);
  document.addEventListener("touchend", touchHandle, false);

	// If you want to prevent dragging, uncomment this section
  document.addEventListener("touchmove", function(e){ e.preventDefault(); }, false);
	
	
	function onBodyLoad() {
		document.addEventListener("deviceready",onDeviceReady,false);
	}
	
	/* When this function is called, PhoneGap has been initialized and is ready to roll */
	function onDeviceReady() {
		setTimeout(function() { window.scrollTo(false, 0); }, 1);    

	}
  </script>
  </head>
  <!-- <body onload="onBodyLoad()"> -->
  <body onload="onDeviceReady()">
    
    <div id="gameview">
      <input type="button" name="new_game" value="New game" id="new_game">
      <p>Moves made: <span id="moves_count">0</span></p>
      <div class="b-board_fg b-board_fg-1"></div>
      <div class="b-board_fg b-board_fg-2"></div>
      <div class="b-board_fg b-board_fg-3"></div>
      <div class="b-board_fg b-board_fg-4"></div>
    </div>
    
    
  </body>
</html>
